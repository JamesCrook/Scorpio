<!DOCTYPE html>
<html lang="en">
<head>
  <title>Scorpio Diagrams</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="./katex/katex.min.css">
  <link rel="icon" href="./favicon.ico" type="image/x-icon" />
  <link rel="stylesheet" href="main.css">


    <script data-cfasync="false" src="./katex/katex.min.js"></script>
    <script data-cfasync="false" src="./scorpio/nurb.js"></script>

    <script data-cfasync="false" src="./scorpio/scorpiodiagrams.js"></script>
    <script data-cfasync="false" src="./scorpio/getters.js"></script>
    <script data-cfasync="false" src="./scorpio/annotator.js"></script>
    <script data-cfasync="false" src="./scorpio/curves.js"></script>
    <script data-cfasync="false" src="./scorpio/vector2d.js"></script>
    <script data-cfasync="false" src="./scorpio/shape.js"></script>
    <script data-cfasync="false" src="./scorpio/readers.js"></script>
    <script data-cfasync="false" src="./scorpio/writers.js"></script>
    <script data-cfasync="false" src="./scorpio/smiles.js"></script>

    <script data-cfasync="false" src="./scorpio/workhorse.js"></script>

    <script data-cfasync="false" src="./js/registrar.js"></script>
    <script data-cfasync="false" src="./js/loader.js"></script>
    <script data-cfasync="false" src="./js/dom_utils.js"></script>

    <script data-cfasync="false" src="./js/katex_fmt.js"></script>
    <script data-cfasync="false" src="./js/markdown_fmt.js"></script>
    <script data-cfasync="false" src="./js/omnia_fmt.js"></script>
    <script data-cfasync="false" src="./js/raw_fmt.js"></script>
    <script data-cfasync="false" src="./js/scorpio_fmt.js"></script>
    <script data-cfasync="false" src="./js/editor_fmt.js"></script>
    <script data-cfasync="false" src="./js/hide_fmt.js"></script>
<style>


html {
  scroll-behavior: smooth;
  background: #743b20;
}

</style>    
    <script>
      window.onload = function(){
      //  initContent();
      }


Registrar.enableGitWraping = false;
Registrar.useUrlChecklist = false;


function getGitContent(){
  var repo = DomUtils.getValue( 'url_input' );//'JamesCrook/Scorpio';

  var srcUrl = `https://raw.githubusercontent.com/${repo}/master/` || './';

  Registrar.wikiSrc = srcUrl +  'wiki/',
  Registrar.diagramSrc = srcUrl + 'diagrams/'
  Registrar.imageSrc = srcUrl + 'images/'

  Omnia_Fmt.intro =  
`
<div class='button_holder'>
<button onclick="location.href='#index';"><a href='#index'>Index</a></button><br><br>
<div class='example'>
Gitwrapping the GitHub repo:<br>
    ${repo}<br><br>
Images, Scorpio diagrams and Scorpio<br>
markdown pages are now being fetched from<br>
the above GitHub repo.
</div>
</div><br clear="all"/>
`  
  loadSource( "index.md");
}

if( Registrar.enableGitWraping ){
// Adds buttons to foot of every page.
Omnia_Fmt.intro = 

`
<div class='button_holder'>
<button onclick="location.href='#index';"><a href='#index'>Index</a></button><br>
<div class='example'>
Currently serving from:<br>
${document.location}<br>
Gitwrap to instead use content from the repo below:<br><br>
<input id="url_input" type='text' value='JamesCrook/Scorpio'></input><br><br>
</div>

<button onclick="getGitContent()">Git Wrap</button><br>
</div><br clear="all"/>
`;
}
else {
Omnia_Fmt.intro = 

`
<div class='button_holder'>
<button onclick="location.href='#index';"><a href='#index'>Index</a></button><br>
<div class='example'>
<!--Gitwrapping disabled-->
</div>
</div><br clear="all"/>
`;
}



Omnia_Fmt.outro = 

`<br clear='all'/>
<div style="float:right;margin:10px;"><a href="gitwrapped.html">Home</a></div><br><br>`;


</script>
</head>
<body>

<!--<h1>Nutshelled Essays</h1>
<b>Nutshells: </b><button onclick="openAllNutshells()">Open All</button>
<button onclick="closeAllNutshells()">Close All</button>
<br>-->

<!--div id="little_logo" style="position: absolute;right: 50%;margin-right:-285px;top:30px;">
<img src="./images/LittleLogo.svg" style="width:100px;height:100px;"></img></div-->

<div id="div_output">
<div class="outer"><div class="main" style="height:600px;"><br>
<h2> Annotated Diagrams</h2>
<br>
</div></div>
</div>


<script>
   var str = Omnia_Fmt.htmlOf( 
`\r\n!!Markdown\r
## Document not found
Is the document where it should be??
` );
   DomUtils.set( "div_output", str );
   var page = DomUtils.getAnchor() || DomUtils.getArg('page') ||
    'index';
   if( page ){
     loadSource( page + '.md');
   }

window.onpopstate = function(event)
{
  var afterHash = (""+document.location).split('#')[1];
  if( window.afterHash == afterHash )
    return;
  window.afterHash = afterHash;
  loadSource( afterHash+'.md' );
};

</script>



</body>